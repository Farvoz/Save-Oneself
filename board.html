<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ö–∞—Ä—Ç–æ—á–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
        }

        #game-container {
            position: relative;
            width: 600px;
            height: 600px;
            margin: 20px;
            border: 2px solid #333;
            background-color: white;
        }

        .card {
            position: absolute;
            width: 50px;
            height: 50px;
            background-color: #2196F3;
            border: 2px solid #1976D2;
            border-radius: 8px;
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            z-index: 2;
        }

        .highlight {
            position: absolute;
            width: 50px;
            height: 50px;
            background-color: #FFEB3B;
            border: 2px dashed #FFC107;
            border-radius: 8px;
            cursor: pointer;
            opacity: 0.8;
            z-index: 1;
        }

        .highlight:hover {
            transform: scale(1.1);
            opacity: 1;
        }

        #counters {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        .counter {
            font-size: 24px;
            color: #333;
            padding: 10px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        #game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0,0,0,0.9);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            display: none;
            font-size: 24px;
            z-index: 3;
        }
    </style>
</head>
<body>
    <div id="counters">
        <div class="counter">‚ù§Ô∏è –ñ–∏–∑–Ω–∏: <span id="lives">16</span></div>
        <div class="counter">üÉè –ö–∞—Ä—Ç—ã: <span id="cards-left">16</span></div>
    </div>
    <div id="game-container"></div>
    <div id="game-over"></div>

    <script>
        const container = document.getElementById('game-container');
        const livesCounter = document.getElementById('lives');
        const cardsCounter = document.getElementById('cards-left');
        const gameOverDiv = document.getElementById('game-over');
        
        let lives = 16;
        let cards = 16;
        let occupiedPositions = {};
        const step = 60; // –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function init() {
            const startX = (container.offsetWidth - 50) / 2;
            const startY = (container.offsetHeight - 50) / 2;
            addCard(startX, startY);
            updateHighlights();
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏
        function addCard(x, y) {
            const card = document.createElement('div');
            card.className = 'card';
            card.style.left = x + 'px';
            card.style.top = y + 'px';
            container.appendChild(card);
            
            occupiedPositions[`${x},${y}`] = true;
            updateGameState();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Ö–æ–¥–æ–≤
        function updateHighlights() {
            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—É—é –ø–æ–¥—Å–≤–µ—Ç–∫—É
            document.querySelectorAll('.highlight').forEach(el => el.remove());

            // –ò—â–µ–º –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏
            Object.keys(occupiedPositions).forEach(pos => {
                const [x, y] = pos.split(',').map(Number);
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ 4 –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
                const directions = [
                    {dx: -step, dy: 0}, // left
                    {dx: step, dy: 0},  // right
                    {dx: 0, dy: -step}, // top
                    {dx: 0, dy: step}   // bottom
                ];

                directions.forEach(({dx, dy}) => {
                    const newX = x + dx;
                    const newY = y + dy;
                    
                    if (isValidPosition(newX, newY)) {
                        const highlight = document.createElement('div');
                        highlight.className = 'highlight';
                        highlight.style.left = newX + 'px';
                        highlight.style.top = newY + 'px';
                        
                        highlight.addEventListener('click', () => {
                            if (lives > 0 && cards > 0) placeCard(newX, newY);
                        });
                        
                        container.appendChild(highlight);
                    }
                });
            });
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –ø–æ–∑–∏—Ü–∏–∏
        function isValidPosition(x, y) {
            return x >= 0 && x <= 550 && 
                   y >= 0 && y <= 550 &&
                   !occupiedPositions[`${x},${y}`];
        }

        // –†–∞–∑–º–µ—â–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏
        function placeCard(x, y) {
            lives--;
            cards--;
            
            addCard(x, y);
            updateHighlights();
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–æ–≤
            livesCounter.textContent = lives;
            cardsCounter.textContent = cards;

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ü–∞ –∏–≥—Ä—ã
            if (lives <= 0 || cards <= 0) {
                gameOverDiv.textContent = `–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –°—á—ë—Ç: ${16 - cards} –∫–∞—Ä—Ç`;
                gameOverDiv.style.display = 'block';
                container.style.pointerEvents = 'none';
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
        function updateGameState() {
            livesCounter.style.color = lives <= 5 ? 'red' : 'inherit';
            cardsCounter.style.color = cards <= 5 ? 'red' : 'inherit';
        }

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        init();
    </script>
</body>
</html>
